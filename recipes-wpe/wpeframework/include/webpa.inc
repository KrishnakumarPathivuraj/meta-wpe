WPE_WEBPA_AUTOSTART       ?= "false"
WPE_WEBPA_INTERFACE       ?= "eth0"
WPE_WEBPA_PINGWAITTIME    ?= "60"
WPE_WEBPA_WEBPAURL        ?= "http://3.123.43.156:8080"
WPE_WEBPA_PARODUSLOCALURL ?= "tcp://127.0.0.1:6666"
WPE_WEBPA_PARTENRID       ?= "Metrological"
WPE_WEBPA_BACKOFFMAX      ?= "9"
WPE_WEBPA_CERTPATH        ?= "/etc/ssl/certs/ca-certificates.crt"
WPE_WEBPA_DEPENDENCIES     = " parodus libparodus libtinyxml "

WPE_WEBPA_GENERIC_ADAPTER                          ?= "true"
WPE_WEBPA_GENERIC_ADAPTER_CLIENTURL                ?= "tcp://127.0.0.1:6667"
WPE_WEBPA_GENERIC_ADAPTER_DATAMODELFILE            ?= "/usr/share/WPEFramework/WebPA/data-model.xml"
WPE_WEBPA_GENERIC_ADAPTER_NOTIFYCONFIGFILE         ?= "/usr/share/WPEFramework/WebPA/notify_webpa_cfg.json"
WPE_WEBPA_GENERIC_ADAPTER_CLIENTMAXRETRY           ?= "1"
WPE_WEBPA_GENERIC_ADAPTER_DEVICE_INFO              ?= "true"
WPE_WEBPA_GENERIC_ADAPTER_DEVICE_INFO_DEPENDENCIES ?= '${@bb.utils.contains('WPE_WEBPA_GENERIC_ADAPTER_DEVICE_INFO', 'true', ' procps ', '', d)}'
WPE_WEBPA_GENERIC_ADAPTER_DEPENDENCIES              = '${WPE_WEBPA_GENERIC_ADAPTER_DEVICE_INFO_DEPENDENCIES}'
WPE_WEBPA_DEPENDENCIES                             += '${WPE_WEBPA_GENERIC_ADAPTER_DEPENDENCIES}'

WPE_WEBPA_GENERIC_ADAPTER_EXTRAFLAGS = ' \
    -DPLUGIN_WEBPA_GENERIC_ADAPTER=${WPE_WEBPA_GENERIC_ADAPTER} \
    -DPLUGIN_WEBPA_GENERICCLIENTURL=${WPE_WEBPA_GENERIC_ADAPTER_CLIENTURL} \
    -DPLUGIN_WEBPA_GENERICCLIENT_MAXRETRY=${WPE_WEBPA_GENERIC_ADAPTER_CLIENTMAXRETRY} \
    -DPLUGIN_WEBPA_DATAMODELFILE=${WPE_WEBPA_GENERIC_ADAPTER_DATAMODELFILE} \
    -DPLUGIN_WEBPA_NOTIFYCONFIGFILE=${WPE_WEBPA_GENERIC_ADAPTER_NOTIFYCONFIGFILE} \
    -DPLUGIN_WEBPA_DEVICE_INFO=${WPE_WEBPA_GENERIC_ADAPTER_DEVICE_INFO} \
'

# ----------------------------------------------------------------------------
WPE_WEBPA_EXTRAFLAGS = " \
    -DPLUGIN_WEBPA_AUTOSTART=${WPE_WEBPA_AUTOSTART} \
    -DPLUGIN_WEBPA_INTERFACE=${WPE_WEBPA_INTERFACE} \
    -DPLUGIN_WEBPA_PINGWAITTIME=${WPE_WEBPA_PINGWAITTIME} \
    -DPLUGIN_WEBPA_WEBPAURL=${WPE_WEBPA_WEBPAURL} \
    -DPLUGIN_WEBPA_PARODUSLOCALURL=${WPE_WEBPA_PARODUSLOCALURL} \
    -DPLUGIN_WEBPA_PARTENRID=${WPE_WEBPA_PARTENRID} \
    -DPLUGIN_WEBPA_BACKOFFMAX=${WPE_WEBPA_BACKOFFMAX} \
    -DPLUGIN_WEBPA_CERTPATH=${WPE_WEBPA_CERTPATH} \
    ${@bb.utils.contains('WPE_WEBPA_GENERIC_ADAPTER', 'true', '${WPE_WEBPA_GENERIC_ADAPTER_EXTRAFLAGS}', '', d)} \
"
# ----------------------------------------------------------------------------

PACKAGECONFIG[webpa] = " \
    -DPLUGIN_WEBPA=ON \
    ${WPE_WEBPA_EXTRAFLAGS}, \
    -DPLUGIN_WEBPA=OFF,${WPE_WEBPA_DEPENDENCIES}, ${WPE_WEBPA_DEPENDENCIES} \
"
